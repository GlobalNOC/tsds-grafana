import sys
import json
from urllib import urlencode
import os
import base64
import json
from requests.auth import HTTPBasicAuth
from urllib2 import Request, urlopen, URLError, HTTPBasicAuthHandler, HTTPPasswordMgr, HTTPPasswordMgrWithDefaultRealm, build_opener, install_opener

if __name__ == "__main__":
	url = "https://tsds-frontend-el7-test.grnoc.iu.edu/grafana/api/dashboards/db"
	#API_KEY = base64.b64encode("eyJrIjoiM0VFS1NqNUtBZ3B4cFdWUTVRVGNJQnRsMEFZVTBjUWUiLCJuIjoiZGFzaGJvYXJkX2tleSIsImlkIjoxfQ==")
	API_KEY = "eyJrIjoiM0VFS1NqNUtBZ3B4cFdWUTVRVGNJQnRsMEFZVTBjUWUiLCJuIjoiZGFzaGJvYXJkX2tleSIsImlkIjoxfQ=="
	postParam ={"dashboard": {"id": None,"title": "Production Overview","tags": [ "templated" ],"timezone": "browser","rows": [{ } ],"schemaVersion": 6,"version": 0},"overwrite": False }
	headers={"Authorization":"Bearer "+API_KEY,"Content-Type":"application/json"}
	try:
		request = Request(url,urlencode(postParam),headers)
		#request = Request(url,None,headers)
		response = urlopen(request)
	except URLError, e:
		print 'Error opening URL ---- ***  \n',e
	print response.data()
	
